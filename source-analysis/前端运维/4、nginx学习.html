<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸€ã€åˆè¯† nginx | å‰ç«¯å£¹ç”²å£¹</title>
    <meta name="description" content="Focus on Yourself!">
    <link rel="stylesheet" href="/portal-blog/assets/style.ce26cf78.css">
    <link rel="modulepreload" href="/portal-blog/assets/app.82ff9f7d.js">
    <link rel="modulepreload" href="/portal-blog/assets/source-analysis_å‰ç«¯è¿ç»´_4ã€nginxå­¦ä¹ .md.1d52ea19.lean.js">
    
    <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-507de226><!--[--><span tabindex="-1" data-v-45f6ae50></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-45f6ae50> Skip to content </a><!--]--><!----><header class="VPNav" data-v-507de226 data-v-0e356168><div class="VPNavBar has-sidebar" data-v-0e356168 data-v-248f78c8><div class="container" data-v-248f78c8><div class="VPNavBarTitle has-sidebar" data-v-248f78c8 data-v-55dd87e7><a class="title" href="/portal-blog/" data-v-55dd87e7><img class="logo" src="/portal-blog/avatar.png" data-v-55dd87e7><!--[-->å‰ç«¯å£¹ç”²å£¹<!--]--></a></div><div class="content" data-v-248f78c8><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-248f78c8 data-v-a30758ee><span id="main-nav-aria-label" class="visually-hidden" data-v-a30758ee>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/portal-blog/frontend-graph/README.html" data-v-a30758ee data-v-74cfe2fe data-v-5704c677><!--[-->å‰ç«¯å›¾è°±<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/portal-blog/project-develop/README.html" data-v-a30758ee data-v-74cfe2fe data-v-5704c677><!--[-->é¡¹ç›®å®æˆ˜<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/portal-blog/source-analysis/README.html" data-v-a30758ee data-v-74cfe2fe data-v-5704c677><!--[-->å­¦ä¹ æ€»ç»“<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/portal-blog/about/" data-v-a30758ee data-v-74cfe2fe data-v-5704c677><!--[-->å…³äº<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-248f78c8 data-v-311055f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-311055f2 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-248f78c8 data-v-0ae890f7 data-v-c0bcf1c2><!--[--><a class="VPSocialLink" href="https://github.com/Yangjia23" title="github" target="_blank" rel="noopener noreferrer" data-v-c0bcf1c2 data-v-4231dbfc><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-4231dbfc><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-4231dbfc>github</span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-248f78c8 data-v-0562f5c0 data-v-b50b2dea><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b50b2dea><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-b50b2dea><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-b50b2dea><div class="VPMenu" data-v-b50b2dea data-v-e73581a2><!----><!--[--><!--[--><!----><div class="group" data-v-0562f5c0><div class="item appearance" data-v-0562f5c0><p class="label" data-v-0562f5c0>Appearance</p><div class="appearance-action" data-v-0562f5c0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0562f5c0 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-0562f5c0><div class="item social-links" data-v-0562f5c0><div class="VPSocialLinks social-links-list" data-v-0562f5c0 data-v-c0bcf1c2><!--[--><a class="VPSocialLink" href="https://github.com/Yangjia23" title="github" target="_blank" rel="noopener noreferrer" data-v-c0bcf1c2 data-v-4231dbfc><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-4231dbfc><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="visually-hidden" data-v-4231dbfc>github</span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-248f78c8 data-v-9a8d4e0a><span class="container" data-v-9a8d4e0a><span class="top" data-v-9a8d4e0a></span><span class="middle" data-v-9a8d4e0a></span><span class="bottom" data-v-9a8d4e0a></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-507de226 data-v-92b0f14a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-92b0f14a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-92b0f14a><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-92b0f14a>Menu</span></button><a class="top-link" href="#" data-v-92b0f14a> Return to top </a></div><aside class="VPSidebar" data-v-507de226 data-v-55e4c7db><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-55e4c7db><span class="visually-hidden" id="sidebar-aria-label" data-v-55e4c7db> Sidebar Navigation </span><!--[--><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible collapsed" data-v-55e4c7db data-v-28bc9d71><div class="title" role="button" data-v-28bc9d71><h2 class="title-text" data-v-28bc9d71>Visualization</h2><div class="action" data-v-28bc9d71><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-28bc9d71><!--[--><a class="VPLink link" href="/portal-blog/source-analysis/Visualization/1%E3%80%81%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%9A%84%E6%9C%AC%E8%B4%A8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>1ã€çº¿æ€§ä»£æ•°çš„æœ¬è´¨-å­¦ä¹ ç¬”è®°</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible collapsed" data-v-55e4c7db data-v-28bc9d71><div class="title" role="button" data-v-28bc9d71><h2 class="title-text" data-v-28bc9d71>Vue2.xæºç </h2><div class="action" data-v-28bc9d71><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-28bc9d71><!--[--><a class="VPLink link" href="/portal-blog/source-analysis/Vue2.x%E6%BA%90%E7%A0%81/1%E3%80%81%E7%AC%AC%E4%B8%80%E7%AF%87%EF%BD%9C%E5%8F%98%E5%8C%96%E4%BE%A6%E6%B5%8B.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>1ã€ç¬¬ä¸€ç¯‡ï½œå˜åŒ–ä¾¦æµ‹</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible collapsed" data-v-55e4c7db data-v-28bc9d71><div class="title" role="button" data-v-28bc9d71><h2 class="title-text" data-v-28bc9d71>Vue3.xæºç </h2><div class="action" data-v-28bc9d71><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-28bc9d71><!--[--><a class="VPLink link" href="/portal-blog/source-analysis/Vue3.x%E6%BA%90%E7%A0%81/1%E3%80%81%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>1ã€æ­å»ºå¼€å‘ç¯å¢ƒ</span><!--]--><!----></a><a class="VPLink link" href="/portal-blog/source-analysis/Vue3.x%E6%BA%90%E7%A0%81/2%E3%80%81reactive%E5%92%8Ceffect%E7%9A%84%E5%AE%9E%E7%8E%B0.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>2ã€reactiveå’Œeffectçš„å®ç°</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible collapsed" data-v-55e4c7db data-v-28bc9d71><div class="title" role="button" data-v-28bc9d71><h2 class="title-text" data-v-28bc9d71>Webpack</h2><div class="action" data-v-28bc9d71><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-28bc9d71><!--[--><a class="VPLink link" href="/portal-blog/source-analysis/Webpack/1%E3%80%81%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95Webpack%E6%BA%90%E7%A0%81.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>1ã€å¦‚ä½•è°ƒè¯•Webpackæºç </span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible collapsed" data-v-55e4c7db data-v-28bc9d71><div class="title" role="button" data-v-28bc9d71><h2 class="title-text" data-v-28bc9d71>å‰ç«¯ç›‘æ§ç³»ç»Ÿ</h2><div class="action" data-v-28bc9d71><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-28bc9d71><!--[--><a class="VPLink link" href="/portal-blog/source-analysis/%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/1%E3%80%81%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E4%B8%8E%E4%B8%8A%E6%8A%A5%E4%B9%8BSDK.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>1ã€æ•°æ®é‡‡é›†ä¸ä¸ŠæŠ¥ä¹‹SDK</span><!--]--><!----></a><a class="VPLink link" href="/portal-blog/source-analysis/%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/2%E3%80%81%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2sentry.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>2ã€ç§æœ‰åŒ–éƒ¨ç½²sentry</span><!--]--><!----></a><a class="VPLink link" href="/portal-blog/source-analysis/%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/sentry.js.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>sentry.js</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible collapsed" data-v-55e4c7db data-v-28bc9d71><div class="title" role="button" data-v-28bc9d71><h2 class="title-text" data-v-28bc9d71>å‰ç«¯è¿ç»´</h2><div class="action" data-v-28bc9d71><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-28bc9d71><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-28bc9d71><!--[--><a class="VPLink link" href="/portal-blog/source-analysis/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/1%E3%80%81Linux%20%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>1ã€Linux å‘½ä»¤æ±‡æ€»</span><!--]--><!----></a><a class="VPLink link" href="/portal-blog/source-analysis/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/2%E3%80%81Vim%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>2ã€Vimå‘½ä»¤æ±‡æ€»</span><!--]--><!----></a><a class="VPLink link" href="/portal-blog/source-analysis/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/3%E3%80%81%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>3ã€æ–‡ä»¶æƒé™</span><!--]--><!----></a><a class="VPLink link active" href="/portal-blog/source-analysis/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/4%E3%80%81nginx%E5%AD%A6%E4%B9%A0.html" data-v-28bc9d71 data-v-31260eac data-v-5704c677><!--[--><span class="link-text" data-v-31260eac>4ã€nginxå­¦ä¹ </span><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-507de226 data-v-a4c57a06><div class="VPDoc has-sidebar" data-v-a4c57a06 data-v-07502c4e><div class="container" data-v-07502c4e><div class="aside" data-v-07502c4e><div class="aside-curtain" data-v-07502c4e></div><div class="aside-container" data-v-07502c4e><div class="aside-content" data-v-07502c4e><div class="VPDocAside" data-v-07502c4e data-v-779d834d><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-779d834d data-v-51e5a8ce><div class="content" data-v-51e5a8ce><div class="outline-marker" data-v-51e5a8ce></div><div class="outline-title" data-v-51e5a8ce>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-51e5a8ce><span class="visually-hidden" id="doc-outline-aria-label" data-v-51e5a8ce> Table of Contents for current page </span><ul class="root" data-v-51e5a8ce><!--[--><li style="" data-v-51e5a8ce><a class="outline-link" href="#ä¸€ã€åˆè¯†-nginx" data-v-51e5a8ce>ä¸€ã€åˆè¯† nginx</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#äºŒã€nginx-å·¥ä½œæµ" data-v-51e5a8ce>äºŒã€nginx å·¥ä½œæµ</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#ä¸‰ã€nginx-å®æˆ˜" data-v-51e5a8ce>ä¸‰ã€nginx å®æˆ˜</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_4ã€location" data-v-51e5a8ce>4ã€location</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_5ã€rewrite" data-v-51e5a8ce>5ã€rewrite</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-779d834d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-07502c4e><div class="content-container" data-v-07502c4e><!--[--><!--]--><main class="main" data-v-07502c4e><div style="position:relative;" class="vp-doc _portal-blog_source-analysis_%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4_4%E3%80%81nginx%E5%AD%A6%E4%B9%A0" data-v-07502c4e><div><p>å­¦ä¹ æŒæ¡å¥½ <code>nginx</code>,</p><h2 id="ä¸€ã€åˆè¯†-nginx" tabindex="-1">ä¸€ã€åˆè¯† nginx <a class="header-anchor" href="#ä¸€ã€åˆè¯†-nginx" aria-hidden="true">#</a></h2><h3 id="_1-1ã€å®‰è£…" tabindex="-1">1.1ã€å®‰è£… <a class="header-anchor" href="#_1-1ã€å®‰è£…" aria-hidden="true">#</a></h3><p>ä»¥ centos ä¸ºä¾‹ï¼Œé€šè¿‡ yum è¿›è¡Œå®‰è£…</p><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># å®‰è£…nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">yum install nginx -y</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®‰è£…çš„ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#A6ACCD;">nginx -v</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹ç¼–è¯‘æ—¶çš„å‚æ•°</span></span>
<span class="line"><span style="color:#A6ACCD;">nginx -V </span></span>
<span class="line"></span></code></pre></div><h3 id="_1-2ã€æ“ä½œ" tabindex="-1">1.2ã€æ“ä½œ <a class="header-anchor" href="#_1-2ã€æ“ä½œ" aria-hidden="true">#</a></h3><p><strong>å‘½ä»¤</strong></p><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">systemctl </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">option</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> nginx.server</span></span>
<span class="line"></span></code></pre></div><p><strong>option</strong></p><ul><li><code>start</code>: å¯åŠ¨</li><li><code>stop</code>: åœæ­¢</li><li><code>status</code>: çŠ¶æ€</li><li><code>restart</code>: é‡å¯</li><li><code>reload</code>: é‡æ–°è¯»å–é…ç½®</li></ul><h3 id="_1-3ã€é…ç½®æ–‡ä»¶" tabindex="-1">1.3ã€é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_1-3ã€é…ç½®æ–‡ä»¶" aria-hidden="true">#</a></h3><p>ä¸Šé¢å®‰è£…çš„ nginx ç‰ˆæœ¬ä¸º <code>nginx/1.20.1</code>ï¼Œä»¥æ­¤ä¸ºä¾‹ï¼Œnginx é…ç½®æ–‡ä»¶å¦‚ä¸‹</p><ul><li><p><code>/etc/nginx/nginx.conf</code>: ä¸»é…ç½®æ–‡ä»¶</p></li><li><p><code>/etc/nginx/conf.d/*.conf</code>: åŒ…å«<code>conf.d</code>ç›®å½•ä¸‹é¢çš„æ‰€æœ‰é…ç½®æ–‡ä»¶</p></li><li><p><code>/etc/nginx/default.d/*.conf</code>: åŒ…å«<code>default.d</code>ç›®å½•ä¸‹é¢çš„æ‰€æœ‰é…ç½®æ–‡ä»¶</p></li></ul><h4 id="_1-3-1ã€nginxé…ç½®è¯­æ³•" tabindex="-1">1.3.1ã€nginxé…ç½®è¯­æ³• <a class="header-anchor" href="#_1-3-1ã€nginxé…ç½®è¯­æ³•" aria-hidden="true">#</a></h4><p>ä¸»é…ç½®æ–‡ä»¶ <code>/etc/nginx/nginx.conf</code> é…ç½®å¦‚ä¸‹</p><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># å…¨å±€é…ç½® </span></span>
<span class="line"><span style="color:#89DDFF;">user </span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># user: è®¾ç½®nginxæœåŠ¡çš„ç³»ç»Ÿä½¿ç”¨ç”¨æˆ·</span></span>
<span class="line"><span style="color:#89DDFF;">worker_processes </span><span style="color:#A6ACCD;">auto</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># å·¥ä½œè¿›ç¨‹æ•°,ä¸€èˆ¬å’ŒCPUæ•°é‡ç›¸åŒ</span></span>
<span class="line"><span style="color:#89DDFF;">error_log </span><span style="color:#A6ACCD;">/var/log/nginx/error.log</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># nginxçš„é”™è¯¯æ—¥å¿—</span></span>
<span class="line"><span style="color:#89DDFF;">pid </span><span style="color:#A6ACCD;">/run/nginx.pid</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># nginxæœåŠ¡å¯åŠ¨æ—¶çš„pid</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span></span>
<span class="line"><span style="color:#89DDFF;">include </span><span style="color:#A6ACCD;">/usr/share/nginx/modules/*.conf</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># äº‹ä»¶é…ç½® </span></span>
<span class="line"><span style="color:#C792EA;">events</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> worker_connections </span><span style="color:#A6ACCD;">1024</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æ¯ä¸ªè¿›ç¨‹å…è®¸çš„æœ€å¤§è¿æ¥æ•° </span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># http é…ç½®</span></span>
<span class="line"><span style="color:#C792EA;">http</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> log_format  main</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#C3E88D;"> - </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_user</span><span style="color:#C3E88D;"> [</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">time_local</span><span style="color:#C3E88D;">] &quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">request</span><span style="color:#C3E88D;">&quot; &#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">status</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">body_bytes_sent</span><span style="color:#C3E88D;"> &quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_referer</span><span style="color:#C3E88D;">&quot; &#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#C3E88D;">&#39;&quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_user_agent</span><span style="color:#C3E88D;">&quot; &quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_x_forwarded_for</span><span style="color:#C3E88D;">&quot;&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æ—¥å¿—è®°å½•æ ¼å¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> access_log </span><span style="color:#A6ACCD;"> /var/log/nginx/access.log </span><span style="color:#89DDFF;"> main;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># é»˜è®¤è®¿é—®æ—¥å¿—</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> sendfile </span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;"> on;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># å¯åŠ¨ sendfile</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> tcp_nopush </span><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;"> on;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># tcp_nopush: æ‡’å‘é€</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> tcp_nodelay </span><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> on;</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> keepalive_timeout </span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">65</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># è¶…æ—¶æ—¶é—´</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> types_hash_max_size </span><span style="color:#A6ACCD;">4096</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> include </span><span style="color:#A6ACCD;">            /etc/nginx/mime.types</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æ–‡ä»¶åç¼€å’Œç±»å‹ç±»å‹çš„å¯¹åº”å…³ç³»</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> default_type </span><span style="color:#A6ACCD;">       application/octet-stream</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># é»˜è®¤content-type</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> include </span><span style="color:#A6ACCD;">/etc/nginx/conf.d/*.conf</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># åŒ…å«çš„å­é…ç½®æ–‡ä»¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># server é…ç½®</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ç›‘å¬ç«¯å£</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">      [::]:80</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ç”¨åŸŸåæ–¹å¼è®¿é—®çš„åœ°å€</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">        /usr/share/nginx/html</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># é™æ€æ–‡ä»¶æ ¹ç›®å½•</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/usr/share/nginx/html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">index.html index.htm</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># é¦–é¡µçš„ç´¢å¼•æ–‡ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> error_page </span><span style="color:#A6ACCD;">404 /404.html</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æŒ‡å®šé”™è¯¯é¡µé¢ ğŸ™…â€â™‚ï¸</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/404.html </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> error_page </span><span style="color:#A6ACCD;">500 </span><span style="color:#F78C6C;">502</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">503</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">504</span><span style="color:#A6ACCD;"> /50x.html</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æŠŠåå°é”™è¯¯é‡å®šå‘åˆ°é™æ€çš„50x.htmlé¡µé¢</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/50x.html </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>é…ç½®æ–‡ä»¶ç”± <strong>æŒ‡ä»¤</strong> ä¸ <strong>æŒ‡ä»¤å—</strong> ç»„æˆ,æŒ‡ä»¤å—ä»¥<code>{}</code>å°†å¤šæ¡æŒ‡ä»¤ç»„ç»‡åœ¨ä¸€èµ·</li><li>æ¯æ¡æŒ‡ä»¤ä»¥ <strong><code>;</code>(åˆ†å·)</strong> ç»“å°¾ï¼ŒæŒ‡ä»¤ä¸å‚æ•°ä¹‹é—´ä»¥ç©ºæ ¼åˆ†éš”</li><li><code>include</code> è¯­å¥å…è®¸æŠŠå¤šä¸ªé…ç½®æ–‡ä»¶ç»„åˆèµ·æ¥ä»¥æå‡å¯ç»´æŠ¤æ€§</li><li>ä¸€ä¸ª<code>http</code>ä¸‹é¢å¯ä»¥é…ç½®å¤šä¸ª <code>server</code>, ä¸€ä¸ª <code>server</code> ä¸‹é¢å¯ä»¥é…ç½®å¤šä¸ª <code>location</code></li></ul><h2 id="äºŒã€nginx-å·¥ä½œæµ" tabindex="-1">äºŒã€nginx å·¥ä½œæµ <a class="header-anchor" href="#äºŒã€nginx-å·¥ä½œæµ" aria-hidden="true">#</a></h2><h2 id="ä¸‰ã€nginx-å®æˆ˜" tabindex="-1">ä¸‰ã€nginx å®æˆ˜ <a class="header-anchor" href="#ä¸‰ã€nginx-å®æˆ˜" aria-hidden="true">#</a></h2><h3 id="_3-1ã€é™æ€èµ„æº-web-æœåŠ¡" tabindex="-1">3.1ã€é™æ€èµ„æº web æœåŠ¡ <a class="header-anchor" href="#_3-1ã€é™æ€èµ„æº-web-æœåŠ¡" aria-hidden="true">#</a></h3><p><strong>é™æ€èµ„æº</strong>: ä¸€èˆ¬å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°webæœåŠ¡å™¨ï¼ŒwebæœåŠ¡å™¨ä»<strong>å†…å­˜</strong>ä¸­å–åˆ°ç›¸åº”çš„æ–‡ä»¶ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯è§£æå¹¶æ¸²æŸ“æ˜¾ç¤ºå‡ºæ¥</p><p><strong>CDN</strong>: å®æ—¶åœ°æ ¹æ®ç½‘ç»œæµé‡å’Œå„èŠ‚ç‚¹çš„è¿æ¥ã€è´Ÿè½½çŠ¶å†µä»¥åŠåˆ°ç”¨æˆ·çš„è·ç¦»å’Œå“åº”æ—¶é—´ç­‰ç»¼åˆä¿¡æ¯å°†ç”¨æˆ·çš„è¯·æ±‚é‡æ–°å¯¼å‘ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡èŠ‚ç‚¹ä¸Š</p><p><strong>é…ç½®é€‰é¡¹</strong></p><table><thead><tr><th>é…ç½®é¡¹</th><th>å«ä¹‰</th><th>å¯é€‰å€¼</th><th>é»˜è®¤å€¼</th><th>ä¸Šä¸‹æ–‡</th></tr></thead><tbody><tr><td><strong><code>sendfile</code></strong></td><td>ä¸ç»è¿‡ç”¨æˆ·å†…æ ¸å‘é€æ–‡ä»¶</td><td>on/off</td><td>off</td><td><code>http, server, location, </code></td></tr><tr><td><strong><code>tcp_nopush</code></strong></td><td>åœ¨<code>sendfile</code>å¼€å¯çš„æƒ…å†µä¸‹ï¼Œåˆå¹¶å¤šä¸ªæ•°æ®åŒ…ï¼Œæé«˜ç½‘ç»œåŒ…çš„ä¼ è¾“æ•ˆç‡</td><td>on/off</td><td>off</td><td><code>http, server, location, </code></td></tr><tr><td><strong><code>tcp_nodelay</code></strong></td><td>åœ¨<code>keepalive</code>è¿æ¥ä¸‹ï¼Œæé«˜ç½‘ç»œåŒ…çš„ä¼ è¾“å®æ—¶æ€§</td><td>on/off</td><td>off</td><td><code>http, server, location, </code></td></tr><tr><td><strong><code>gzip</code></strong></td><td>å‹ç¼©æ–‡ä»¶å¯ä»¥èŠ‚çº¦å¸¦å®½å’Œæé«˜ç½‘ç»œä¼ è¾“æ•ˆç‡ç±»å‹</td><td>on/off</td><td>off</td><td><code>http, server, location, </code></td></tr><tr><td><strong><code>gzip_min_length</code></strong></td><td>æœ€å°å‹ç¼©æ–‡ä»¶çš„å¤§å°</td><td>size</td><td></td><td><code>http, server, location, </code></td></tr><tr><td><strong><code>gzip_comp_level</code></strong></td><td>å‹ç¼©çº§åˆ«, å€¼è¶Šé«˜ï¼Œå‹ç¼©çš„ä½“ç§¯è¶Šå°</td><td>level</td><td>1</td><td><code>http, server, location, </code></td></tr><tr><td><strong><code>gzip_http_version</code></strong></td><td>å‹ç¼©ç‰ˆæœ¬</td><td>1.0/1.1</td><td>1.1</td><td><code>http, server, location, </code></td></tr><tr><td><strong><code>http_gzip-static_module</code></strong></td><td>å…ˆæ‰¾ç£ç›˜ä¸Šæ‰¾åŒåçš„<code>.gz</code>è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨,èŠ‚çº¦CPUçš„å‹ç¼©æ—¶é—´å’Œæ€§èƒ½æŸè€—</td><td>on/off</td><td>off</td><td><code>http, server, location, </code></td></tr></tbody></table><p><strong>å®æˆ˜</strong></p><ul><li>èµ„æº</li></ul><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mkdir -p /data/www/images</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir -p /data/www/html</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> color </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> /data/www/html/color.html</span></span>
<span class="line"><span style="color:#A6ACCD;">gzip /data/www/html/color.html</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir -p /data/www/download</span></span>
<span class="line"></span></code></pre></div><ul><li>é…ç½®</li></ul><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.*\.(jpg|png|gif)$ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip </span><span style="color:#A6ACCD;">off</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">#å…³é—­å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/data/www/images</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.*\.(html|js|css)$ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_static </span><span style="color:#A6ACCD;">on</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip </span><span style="color:#A6ACCD;">on</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#å¯ç”¨å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_min_length </span><span style="color:#A6ACCD;">1k</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">#åªå‹ç¼©è¶…è¿‡1Kçš„æ–‡ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_http_version </span><span style="color:#A6ACCD;">1.1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#å¯ç”¨gzipå‹ç¼©æ‰€éœ€çš„HTTPæœ€ä½ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_comp_level </span><span style="color:#A6ACCD;">9</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;">#å‹ç¼©çº§åˆ«ï¼Œå‹ç¼©æ¯”ç‡è¶Šé«˜æ–‡ä»¶è¢«å‹ç¼©çš„ä½“ç§¯è¶Šå°</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_types </span><span style="color:#A6ACCD;"> text/css application/javascript</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">#è¿›è¡Œå‹ç¼©çš„æ–‡ä»¶ç±»å‹</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/data/www/html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^/download </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_static </span><span style="color:#A6ACCD;">on</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#å¯ç”¨å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> tcp_nopush </span><span style="color:#A6ACCD;">on</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># ä¸è¦ç€æ€¥å‘ï¼Œæ”’ä¸€æ³¢å†å‘</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/data/www</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æ³¨æ„æ­¤å¤„ç›®å½•æ˜¯`/data/www`è€Œä¸æ˜¯`/data/www/download`</span></span>
<span class="line"><span style="color:#A6ACCD;">} </span></span>
<span class="line"></span></code></pre></div><h3 id="_3-2ã€æµè§ˆå™¨ç¼“å­˜" tabindex="-1">3.2ã€æµè§ˆå™¨ç¼“å­˜ <a class="header-anchor" href="#_3-2ã€æµè§ˆå™¨ç¼“å­˜" aria-hidden="true">#</a></h3><p><strong>æµè§ˆå™¨æ ¡éªŒæœ¬åœ°ç¼“å­˜æµç¨‹</strong></p><p><img src="/portal-blog/images/linux/cachecontrol.png" alt=""></p><p>å¯è®¾ç½®çš„å“åº”å¤´</p><ul><li>Expires</li><li>Cache-Control</li><li>Etag</li><li>Last-Modified</li></ul><p><strong>è®¾ç½® Expires</strong></p><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.*\.(jpg|png|gif)$ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> expires </span><span style="color:#A6ACCD;">24h</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-3ã€è·¨åŸŸ" tabindex="-1">3.3ã€è·¨åŸŸ <a class="header-anchor" href="#_3-3ã€è·¨åŸŸ" aria-hidden="true">#</a></h3><p>å…³äºä»€ä¹ˆæ˜¯è·¨åŸŸï¼Œä»¥åŠæ±‡æ€»çš„è§£å†³åŠæ³•ï¼Œè¯·å‚è€ƒ <a href="https://yangjia23.github.io/portal-blog/frontend-graph/%E6%B5%8F%E8%A7%88%E5%99%A8/4%E3%80%81%E4%B8%80%E6%96%87%E6%B1%87%E6%80%BB9%E7%A7%8D%E8%B7%A8%E5%9F%9F%E6%96%B9%E6%B3%95.html" target="_blank" rel="noopener noreferrer">ä¸€æ–‡æ±‡æ€»9ç§è·¨åŸŸæ–¹æ³•</a>ï¼Œåœ¨ nginx ä¸­è§£å†³è·¨åŸŸï¼Œéœ€è¦è®¾ç½®ä¸åŒçš„å“åº”å¤´</p><p><strong>è¯­æ³•</strong></p><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">add_header name value</span></span>
<span class="line"></span></code></pre></div><p><strong>å®¢æˆ·ç«¯</strong></p><p>åœ¨å®¢æˆ·ç«¯é€šè¿‡ live-server å¼€å¯æœ¬åœ°æœåŠ¡ï¼Œå‘æœåŠ¡ç«¯å‘é€è¯·æ±‚</p><div class="language-html"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">HTML</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">PUBLIC</span><span style="color:#89DDFF;"> </span><span style="color:#C3E88D;">&quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    &lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> xhr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">XMLHttpRequest</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        xhr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">open</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://{ip}/user.json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        xhr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onreadystatechange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">xhr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">readyState</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">4</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">xhr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">status</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">200</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">xhr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">responseText</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      xhr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><strong>æœåŠ¡ç«¯</strong></p><ul><li>é™æ€èµ„æº</li></ul><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mkdir -p /data/json</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> /data/json</span></span>
<span class="line"><span style="color:#A6ACCD;">vi user.json</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">å‰ç«¯å£¹ç”²å£¹</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>nginx é…ç½®</li></ul><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.*\.json$ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> add_header </span><span style="color:#A6ACCD;">Access-Control-Allow-Origin http://127.0.0.1:8080</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> add_header </span><span style="color:#A6ACCD;">Access-Control-Allow-Methods GET,POST,PUT,DELETE,OPTIONS</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/data/json</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-4ã€ä»£ç†" tabindex="-1">3.4ã€ä»£ç† <a class="header-anchor" href="#_3-4ã€ä»£ç†" aria-hidden="true">#</a></h3><p>é€šè¿‡åœ¨ <code>server</code> æˆ– <code>location</code> ä¸­è®¾ç½® <code>proxy_pass</code> æ¥å®ç°ä»£ç†</p><h4 id="_3-4-1ã€æ­£å‘ä»£ç†" tabindex="-1">3.4.1ã€æ­£å‘ä»£ç† <a class="header-anchor" href="#_3-4-1ã€æ­£å‘ä»£ç†" aria-hidden="true">#</a></h4><p>æ­£å‘ä»£ç†çš„å¯¹è±¡æ˜¯å®¢æˆ·ç«¯,æœåŠ¡å™¨ç«¯çœ‹ä¸åˆ°çœŸæ­£çš„å®¢æˆ·ç«¯ï¼Œä¾‹å¦‚ç¿»å¢™ä½¿ç”¨çš„VPN</p><h4 id="_3-4-2ã€åå‘ä»£ç†" tabindex="-1">3.4.2ã€åå‘ä»£ç† <a class="header-anchor" href="#_3-4-2ã€åå‘ä»£ç†" aria-hidden="true">#</a></h4><p>åå‘ä»£ç†çš„å¯¹è±¡çš„æœåŠ¡ç«¯,å®¢æˆ·ç«¯çœ‹ä¸åˆ°çœŸæ­£çš„æœåŠ¡ç«¯ï¼Œä¾‹å¦‚ nginx ä»£ç†çš„åº”ç”¨æœåŠ¡å™¨</p><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^/api </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">http://localhost:3000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_redirect </span><span style="color:#A6ACCD;">default</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#é‡å®šå‘</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">Host </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_host</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">#å‘åä¼ é€’å¤´ä¿¡æ¯</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">X-Real-IP </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#æŠŠçœŸå®IPä¼ ç»™åº”ç”¨æœåŠ¡å™¨</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_connect_timeout </span><span style="color:#A6ACCD;">30</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#é»˜è®¤è¶…æ—¶æ—¶é—´</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_send_timeout </span><span style="color:#A6ACCD;">60</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># å‘é€è¶…æ—¶</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_read_timeout </span><span style="color:#A6ACCD;">60</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># è¯»å–è¶…æ—¶</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><p><strong><code>proxy_pass</code></strong></p><ul><li><code>proxy_pass</code> åçš„ <code>url</code> æœ€ååŠ ä¸Š <code>/</code> å°±æ˜¯ç»å¯¹æ ¹è·¯å¾„, <code>location</code> ä¸­åŒ¹é…çš„è·¯å¾„éƒ¨åˆ†ä¸èµ°ä»£ç†,ä¹Ÿå°±æ˜¯è¯´ä¼šè¢«æ›¿æ¢æ‰</li></ul><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/a/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">http://127.0.0.1/b/</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># è¯·æ±‚ http://example.com/a/test.html, ä¼šè¢«ä»£ç†åˆ° http://127.0.0.1/b/test.html</span></span>
<span class="line"></span></code></pre></div><ul><li><code>proxy_pass</code> åçš„ <code>url</code> æœ€åæ²¡æœ‰ <code>/</code> å°±æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œ<code>location</code> ä¸­åŒ¹é…çš„è·¯å¾„éƒ¨åˆ†ä¼šèµ°ä»£ç†,ä¹Ÿå°±æ˜¯è¯´ä¼šä¿ç•™</li></ul><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/a/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">http://127.0.0.1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># è¯·æ±‚ http://example.com/a/test.html, ä¼šè¢«ä»£ç†åˆ° http://127.0.0.1/a/test.html</span></span>
<span class="line"></span></code></pre></div><p>(PS: ä¸ºäº†æ–¹ä¾¿è®°å¿†å’Œè§„èŒƒé…ç½®ï¼Œå»ºè®®æ‰€æœ‰çš„ <code>proxy_pass</code> åçš„<code>url</code>éƒ½ä»¥<code>/</code>ç»“å°¾ )</p><ul><li>åœ¨<code>proxy_pass</code>å‰é¢ç”¨äº†<code>rewrite</code>ï¼Œå¦‚ä¸‹ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œ<code>proxy_pass</code>æ˜¯æ— æ•ˆçš„</li></ul><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/getName/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">rewrite</span><span style="color:#A6ACCD;">    /getName/([</span><span style="color:#C3E88D;">^/]+) /users?name=$</span><span style="color:#A6ACCD;">1 </span><span style="color:#F78C6C;">break</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">http://127.0.0.1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-5ã€è´Ÿè½½å‡è¡¡" tabindex="-1">3.5ã€è´Ÿè½½å‡è¡¡ <a class="header-anchor" href="#_3-5ã€è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a></h3><p>å½“ç½‘ç«™å‡ºè¡Œé«˜å¹¶å‘ï¼Œè®¿é—®é‡å¤§æ—¶ï¼Œä¸€å°æœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›ã€å­˜å‚¨ç©ºé—´ä¸è¶³æ—¶ï¼Œåº”è¯¥å¢åŠ ä¸€å°æœåŠ¡å™¨å»åˆ†æ‹…ç½‘ç«™çš„è®¿é—®åŠå­˜å‚¨å‹åŠ›ã€‚</p><p>é€šè¿‡è´Ÿè½½å‡è¡¡è°ƒåº¦æœåŠ¡å™¨ï¼Œå°†æ‰€æœ‰çš„è®¿é—®è¯·æ±‚åˆ†å‘åˆ°åº”ç”¨æœåŠ¡å™¨é›†ç¾¤ä¸­çš„ä»»ä½•ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå½“æœ‰æ›´å¤šçš„è®¿é—®ï¼Œå°±åœ¨é›†ç¾¤ä¸­åŠ å…¥æ›´å¤šçš„åº”ç”¨æœåŠ¡å™¨</p><h4 id="_3-5-1ã€upstream" tabindex="-1">3.5.1ã€upstream <a class="header-anchor" href="#_3-5-1ã€upstream" aria-hidden="true">#</a></h4><p>é€šè¿‡ <code>upstream</code> å®šä¹‰ä¸€ç»„æœåŠ¡æ± ï¼Œnginx æŠŠè¯·æ±‚è½¬å‘åˆ°æœåŠ¡æ± </p><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">upstream</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">webServer </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:4000;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:5000;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_3-5-2ã€åç«¯æœåŠ¡å™¨è°ƒè¯•çŠ¶æ€" tabindex="-1">3.5.2ã€åç«¯æœåŠ¡å™¨è°ƒè¯•çŠ¶æ€ <a class="header-anchor" href="#_3-5-2ã€åç«¯æœåŠ¡å™¨è°ƒè¯•çŠ¶æ€" aria-hidden="true">#</a></h4><table><thead><tr><th>çŠ¶æ€</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong><code>down</code></strong></td><td>å½“å‰æœåŠ¡å™¨ä¸å‚ä¸è´Ÿè½½å‡è¡¡</td></tr><tr><td><strong><code>backup</code></strong></td><td>å½“å…¶å®ƒèŠ‚ç‚¹éƒ½æ— æ³•ä½¿ç”¨æ—¶çš„å¤‡ä»½æœåŠ¡å™¨</td></tr><tr><td><strong><code>max_fails</code></strong></td><td>å…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°, åˆ°è¾¾æœ€å¤§æ¬¡æ•°å°±ä¼šä¼‘çœ </td></tr><tr><td><strong><code>fail_timeout</code></strong></td><td>ç»è¿‡ max_fails å¤±è´¥åï¼ŒæœåŠ¡å™¨ä¼‘çœ æ—¶é—´,é»˜è®¤10ç§’</td></tr><tr><td><strong><code>max_conns</code></strong></td><td>å½“å‰æœåŠ¡å™¨å¯æ¥æ”¶çš„æœ€å¤§è¿æ¥æ•°</td></tr></tbody></table><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">upstream</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">webServer </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:3000 down; </span><span style="color:#676E95;font-style:italic;">#ä¸å‚ä¸è´Ÿè½½å‡è¡¡</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:4000 backup; </span><span style="color:#676E95;font-style:italic;">#å……å½“å¤‡ä»½æœåŠ¡å™¨</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:5000 ;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_3-5-2ã€åˆ†é…æ–¹å¼" tabindex="-1">3.5.2ã€åˆ†é…æ–¹å¼ <a class="header-anchor" href="#_3-5-2ã€åˆ†é…æ–¹å¼" aria-hidden="true">#</a></h4><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>è½®è¯¢(é»˜è®¤)</td><td><strong>å¹³å‡ä¸»ä¹‰</strong>, æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå½“æŸä¸ªæœåŠ¡å™¨downæ‰ï¼Œä¼šè¢«è‡ªåŠ¨å‰”é™¤</td></tr><tr><td><strong><code>weight</code></strong></td><td><strong>åŠ æƒè½®è¯¢</strong>ï¼Œé€šè¿‡<code>weight</code>æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œ<code>weight</code>å’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”</td></tr><tr><td><strong><code>ip_hash</code></strong></td><td>æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®<code>ip</code>çš„<code>hash</code>ç»“æœåˆ†é…, æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³<code>session</code> çš„é—®é¢˜</td></tr><tr><td><strong><code>least_conn</code></strong></td><td>å“ªä¸ªæœºå™¨ä¸Šè¿æ¥æ•°å°‘å°±åˆ†å‘ç»™è°</td></tr><tr><td><strong><code>url_hash</code></strong></td><td>æŒ‰è®¿é—®çš„<code>URL</code>åœ°å€æ¥åˆ†é… è¯·æ±‚ï¼Œæ¯ä¸ª<code>URL</code>éƒ½å®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ä¸Š(ç¼“å­˜)ã€‚(ps: <em>ç¬¬ä¸‰æ–¹</em>ï¼‰</td></tr><tr><td><strong><code>fair</code></strong></td><td>æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚ï¼ˆps: <em>ç¬¬ä¸‰æ–¹</em>ï¼‰</td></tr></tbody></table><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># weight</span></span>
<span class="line"><span style="color:#C792EA;">upstream</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">webServer </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:3000 weight</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  server 127.0.0.1:4000 weight</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  server 127.0.0.1:5000 weight</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># ip_hash</span></span>
<span class="line"><span style="color:#C792EA;">upstream</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">webServer </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">ip_hash</span><span style="color:#A6ACCD;"> # [type], type = ip_hash | least_conn | url_hash | fair</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="_4ã€location" tabindex="-1">4ã€location <a class="header-anchor" href="#_4ã€location" aria-hidden="true">#</a></h2><p><code>location</code> ä¼šç”¨æ¥åŒ¹é… <code>URI</code>ï¼Œä½†ä¼šå¿½ç•¥å…¶ä¸­çš„å‚æ•°</p><h3 id="_4-1ã€æ­£åˆ™è¡¨è¾¾å¼" tabindex="-1">4.1ã€æ­£åˆ™è¡¨è¾¾å¼ <a class="header-anchor" href="#_4-1ã€æ­£åˆ™è¡¨è¾¾å¼" aria-hidden="true">#</a></h3><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>.</code></td><td>åŒ¹é…é™¤æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»æ„å­—ç¬¦</td></tr><tr><td><code>?</code></td><td>é‡å¤0æ¬¡æˆ–1æ¬¡</td></tr><tr><td><code>+</code></td><td>é‡å¤1æ¬¡æˆ–æ›´å¤šæ¬¡</td></tr><tr><td><code>*</code></td><td>é‡å¤0æ¬¡æˆ–å¤šæ¬¡</td></tr><tr><td><code>^</code></td><td>åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹</td></tr><tr><td><code>$</code></td><td>åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸ</td></tr><tr><td><code>{n}</code></td><td>é‡å¤næ¬¡</td></tr><tr><td><code>{n,}</code></td><td>é‡å¤næ¬¡æˆ–æ›´å¤šæ¬¡</td></tr><tr><td><code>[abc]</code></td><td>åŒ¹é…å•ä¸ªå­—ç¬¦aæˆ–è€…bæˆ–è€…c</td></tr><tr><td><code>a-z</code></td><td>åŒ¹é…a-zå°å†™å­—æ¯çš„ä»»æ„ä¸€ä¸ª</td></tr><tr><td><code>\</code></td><td>è½¬ä¹‰å­—ç¬¦</td></tr><tr><td><code>()</code></td><td>åˆ†ç»„ï¼Œç”¨äºåŒ¹é…æ‹¬å·ä¹‹é—´çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡$1ã€$2å¼•ç”¨</td></tr><tr><td><code>\w</code></td><td>æŒ‡åŒ…å«å¤§ å°å†™å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿ ç›¸å½“äº(<code>[0-9a-zA-Z]</code>)</td></tr></tbody></table><h3 id="_4-2ã€è¯­æ³•è§„åˆ™" tabindex="-1">4.2ã€è¯­æ³•è§„åˆ™ <a class="header-anchor" href="#_4-2ã€è¯­æ³•è§„åˆ™" aria-hidden="true">#</a></h3><ul><li>å‰ç¼€åŒ¹é… <ul><li>å¸¸è§„</li><li><code>=</code>, ç²¾ç¡®åŒ¹é…</li><li><code>^~</code>, åŒ¹é…ä¸Šååˆ™ä¸å†ç»§ç»­è¿›è¡Œæ­£åˆ™çš„åŒ¹é…</li></ul></li><li>æ­£åˆ™è¡¨è¾¾å¼ <ul><li><code>~</code>, å¤§å°å†™æ•æ„Ÿçš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</li><li><code>~*</code>, å¿½ç•¥å¤§å°å†™æ•æ„Ÿçš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</li></ul></li><li>å†…éƒ¨è°ƒè½¬ <ul><li>ç”¨äºå†…éƒ¨è·³è½¬çš„å‘½å <code>location @xxx</code></li></ul></li></ul><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">[=|~|~*|^~] uri </span><span style="color:#A6ACCD;">{...}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">@name</span><span style="color:#A6ACCD;">{...}</span></span>
<span class="line"></span></code></pre></div><h3 id="_4-3ã€åŒ¹é…è§„åˆ™" tabindex="-1">4.3ã€åŒ¹é…è§„åˆ™ <a class="header-anchor" href="#_4-3ã€åŒ¹é…è§„åˆ™" aria-hidden="true">#</a></h3><p><img src="/portal-blog/images/linux/nginx-location.png" alt=""></p><ul><li>ç­‰å·ç±»å‹ï¼ˆ=ï¼‰çš„ä¼˜å…ˆçº§æœ€é«˜</li><li>^~ç±»å‹è¡¨è¾¾å¼çš„ä¼˜å…ˆçº§æ¬¡ä¹‹</li><li>åä¹‹ï¼Œåˆ™åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ç±»å‹ï¼ˆ~ ~*ï¼‰ï¼Œå¦‚æœæœ‰å¤šä¸ªlocationçš„æ­£åˆ™èƒ½åŒ¹é…çš„è¯ï¼Œåˆ™ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ€é•¿çš„é‚£ä¸ª</li><li>æœ€åï¼Œå¸¸è§„å­—ç¬¦ä¸²åŒ¹é…ç±»å‹æŒ‰å‰ç¼€åŒ¹é…</li></ul><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">location ~ /T1/$ {</span></span>
<span class="line"><span style="color:#A6ACCD;">  return 200 &#39;åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">location ~* /T1/(\w+)$ {</span></span>
<span class="line"><span style="color:#A6ACCD;">  return 200 &#39;åŒ¹é…åˆ°æœ€é•¿çš„æ­£åˆ™è¡¨è¾¾å¼&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">location ^~ /T1/ {</span></span>
<span class="line"><span style="color:#A6ACCD;">  return 200 &#39;åœæ­¢åç»­çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">location  /T1/T2 {</span></span>
<span class="line"><span style="color:#A6ACCD;">  return 200 &#39;æœ€é•¿çš„å‰ç¼€è¡¨è¾¾å¼åŒ¹é…&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">location  /T1 {</span></span>
<span class="line"><span style="color:#A6ACCD;">  return 200 &#39;å‰ç¼€è¡¨è¾¾å¼åŒ¹é…&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">location = /T1 {</span></span>
<span class="line"><span style="color:#A6ACCD;">  return 200 &#39;ç²¾ç¡®åŒ¹é…&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">/T1     //ç²¾ç¡®åŒ¹é…</span></span>
<span class="line"><span style="color:#A6ACCD;">/T1/    //åœæ­¢åç»­çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</span></span>
<span class="line"><span style="color:#A6ACCD;">/T1/T2  //åŒ¹é…åˆ°æœ€é•¿çš„æ­£åˆ™è¡¨è¾¾å¼</span></span>
<span class="line"><span style="color:#A6ACCD;">/T1/T2/ //æœ€é•¿çš„å‰ç¼€è¡¨è¾¾å¼åŒ¹é…</span></span>
<span class="line"><span style="color:#A6ACCD;">/t1/T2  //åŒ¹é…åˆ°æœ€é•¿çš„æ­£åˆ™è¡¨è¾¾å¼</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="_5ã€rewrite" tabindex="-1">5ã€rewrite <a class="header-anchor" href="#_5ã€rewrite" aria-hidden="true">#</a></h2><p>é€šè¿‡ <code>rewrite</code> å®ç° url é‡å†™åŠé‡å®šå‘</p><p><strong>è¯­æ³•</strong></p><div class="language-"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">rewrite regex replacement [flag]</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>flag</strong></p><p>flag: æ ‡è¯†è§„åˆ™å¯¹åº”çš„ç±»å‹</p><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>last</code></td><td>å…ˆåŒ¹é…è‡ªå·±çš„location,ç„¶åé€šè¿‡<code>rewrite</code>è§„åˆ™æ–°å»ºä¸€ä¸ªè¯·æ±‚å†æ¬¡è¯·æ±‚æœåŠ¡ç«¯</td></tr><tr><td><code>break</code></td><td>å…ˆåŒ¹é…è‡ªå·±çš„location,ç„¶åç”Ÿå‘½å‘¨æœŸä¼šåœ¨å½“å‰çš„locationç»“æŸ,ä¸å†è¿›è¡Œåç»­çš„åŒ¹é…</td></tr><tr><td><code>redirect</code></td><td>è¿”å›302æ˜¨æ—¶é‡å®šå‘,ä»¥åè¿˜ä¼šè¯·æ±‚è¿™ä¸ªæœåŠ¡å™¨</td></tr><tr><td><code>permanent</code></td><td>è¿”å›301æ°¸ä¹…é‡å®šå‘,ä»¥åä¼šç›´æ¥è¯·æ±‚æ°¸ä¹…é‡å®šå‘åçš„åŸŸå</td></tr></tbody></table><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^/break </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">rewrite</span><span style="color:#A6ACCD;"> ^/break /test </span><span style="color:#F78C6C;">break</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/data/html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^/last </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">rewrite</span><span style="color:#A6ACCD;"> ^/last /test</span><span style="color:#89DDFF;"> last;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/test </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> default_type </span><span style="color:#A6ACCD;">application/json</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&#39;{&quot;code&quot;:0,&quot;msg&quot;:&quot;success&quot;}&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^/redirect </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">rewrite</span><span style="color:#A6ACCD;"> ^/redirect http://www.baidu.com </span><span style="color:#F78C6C;">redirect</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^/permanent </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">rewrite</span><span style="color:#A6ACCD;"> ^/permanent http://www.baidu.com </span><span style="color:#F78C6C;">permanent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-shell"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;"># curl http://localhost/last</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">code</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">:0,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">msg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">success</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># curl http://localhost/break</span></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># å¹¶æ²¡æœ‰ç»§ç»­åŒ¹é…åˆ° `/test`, è€Œæ˜¯ç›´æ¥ç»ˆæ­¢ï¼Œå» /data/html/ ç›®å½•ä¸‹å»åŒ¹é… test ç›®å½•</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># curl -vL http://localhost/redirect</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># curl -vL http://localhost/permanent</span></span>
<span class="line"></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-07502c4e data-v-176f99de><div class="edit-info" data-v-176f99de><!----><!----></div><div class="prev-next" data-v-176f99de><div class="pager" data-v-176f99de><a class="pager-link prev" href="/portal-blog/source-analysis/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/3%E3%80%81%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90.html" data-v-176f99de><span class="desc" data-v-176f99de>Previous page</span><span class="title" data-v-176f99de>3ã€æ–‡ä»¶æƒé™</span></a></div><div class="has-prev pager" data-v-176f99de><!----></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"about_index.md\":\"4dd019ab\",\"frontend-graph_css_1ã€é¡µé¢å¸ƒå±€åŸç†.md\":\"bfb81a3c\",\"frontend-graph_css_2ã€å¸¸è§çš„é¡µé¢å¸ƒå±€åŠæŠ€å·§.md\":\"2de2e826\",\"frontend-graph_css_3ã€ä¸€æ–‡æ±‡æ€»å…ƒç´ å±…ä¸­çš„9ç§åŠæ³•.md\":\"8c0bdad8\",\"frontend-graph_css_4ã€cssä¸­çš„åŠ¨ç”».md\":\"1564bda4\",\"frontend-graph_css_5ã€é¢è¯•é¢˜æ±‡æ€».md\":\"078c6a98\",\"frontend-graph_css_6ã€cssèµ„æºæ±‡æ€».md\":\"21c209dd\",\"frontend-graph_javascript_1ã€jsä¸­çš„åŸºç¡€çŸ¥è¯†.md\":\"c2a2b3a8\",\"frontend-graph_javascript_2ã€é¢å‘å¯¹è±¡å’ŒåŸå‹.md\":\"d67bec40\",\"frontend-graph_javascript_3ã€jsä¸­çš„thiså’Œé—­åŒ….md\":\"aa4f1cbc\",\"frontend-graph_javascript_4ã€jsä»£ç æ‰§è¡Œæœºåˆ¶.md\":\"23d567bb\",\"frontend-graph_javascript_5ã€jsä¸­çš„å¼‚æ­¥.md\":\"6856baf5\",\"frontend-graph_javascript_6ã€æ‰‹å†™promiseæ±‡æ€».md\":\"ad1ecf53\",\"frontend-graph_javascript_7ã€30ä¸ªapiæ‰‹å†™å®ç°.md\":\"178e5a4c\",\"frontend-graph_javascript_8ã€é«˜é¢‘é¢è¯•é¢˜æ±‡æ€».md\":\"7fa93cee\",\"frontend-graph_readme.md\":\"8c9e03e6\",\"frontend-graph_vue_1ã€vueé¢è¯•é¢˜æ±‡æ€».md\":\"f6c6c735\",\"frontend-graph_å·¥ç¨‹åŒ–_1ã€æ¨¡å—åŒ–æœºåˆ¶.md\":\"7b075db7\",\"frontend-graph_å·¥ç¨‹åŒ–_2ã€webpack å·¥ä½œæµç¨‹.md\":\"43c27d9a\",\"frontend-graph_å·¥ç¨‹åŒ–_3ã€webpack loaderæœºåˆ¶.md\":\"90c9bc53\",\"frontend-graph_å·¥ç¨‹åŒ–_4ã€webpack pluginæœºåˆ¶.md\":\"9e9c8462\",\"frontend-graph_å·¥ç¨‹åŒ–_5ã€webpack ä¼˜åŒ–ç­–ç•¥.md\":\"ace2e5c6\",\"frontend-graph_æµè§ˆå™¨_1ã€æµè§ˆå™¨ç¼“å­˜.md\":\"5c516eb3\",\"frontend-graph_æµè§ˆå™¨_2ã€æµè§ˆå™¨æ¶æ„.md\":\"084bc64b\",\"frontend-graph_æµè§ˆå™¨_3ã€æµè§ˆå™¨çš„å·¥ä½œåŸç†.md\":\"811289d4\",\"frontend-graph_æµè§ˆå™¨_4ã€ä¸€æ–‡æ±‡æ€»9ç§è·¨åŸŸæ–¹æ³•.md\":\"1cab1aa1\",\"frontend-graph_æµè§ˆå™¨_5ã€å…¨é¢æ€»ç»“webæ€§èƒ½ä¼˜åŒ–.md\":\"3c2d3b09\",\"frontend-graph_æµè§ˆå™¨_6ã€æµè§ˆå™¨ä¸­çš„ç½‘ç»œ.md\":\"89644248\",\"frontend-graph_æµè§ˆå™¨_7ã€æµè§ˆå™¨å®‰å…¨.md\":\"a0e85baa\",\"frontend-graph_æµè§ˆå™¨_8ã€ç½‘ç»œé¢è¯•é¢˜å¤§æ±‡æ€».md\":\"c88473c3\",\"index.md\":\"bb333925\",\"project-develop_cicd_jenkinsä¸gitlabç»“åˆ.md\":\"2d3cd97d\",\"project-develop_portal_ä½ä»£ç æ­å»ºå¯è§†åŒ–å¤§å±.md\":\"ae307eb9\",\"project-develop_readme.md\":\"e84d5bbf\",\"project-develop_vue_1ã€vue3å’Œviteæ­å»ºuiç»„ä»¶åº“.md\":\"acc338e4\",\"source-analysis_readme.md\":\"75eb9411\",\"source-analysis_visualization_1ã€çº¿æ€§ä»£æ•°çš„æœ¬è´¨-å­¦ä¹ ç¬”è®°.md\":\"ae556cc0\",\"source-analysis_vue2.xæºç _1ã€ç¬¬ä¸€ç¯‡ï½œå˜åŒ–ä¾¦æµ‹.md\":\"a90d7479\",\"source-analysis_vue3.xæºç _1ã€æ­å»ºå¼€å‘ç¯å¢ƒ.md\":\"d39af3e0\",\"source-analysis_vue3.xæºç _2ã€reactiveå’Œeffectçš„å®ç°.md\":\"73e9b33e\",\"source-analysis_webpack_1ã€å¦‚ä½•è°ƒè¯•webpackæºç .md\":\"b97e25e6\",\"source-analysis_å‰ç«¯ç›‘æ§ç³»ç»Ÿ_1ã€æ•°æ®é‡‡é›†ä¸ä¸ŠæŠ¥ä¹‹sdk.md\":\"2aa1637e\",\"source-analysis_å‰ç«¯ç›‘æ§ç³»ç»Ÿ_2ã€ç§æœ‰åŒ–éƒ¨ç½²sentry.md\":\"7503e8c3\",\"source-analysis_å‰ç«¯è¿ç»´_1ã€linux å‘½ä»¤æ±‡æ€».md\":\"de303f6a\",\"source-analysis_å‰ç«¯è¿ç»´_2ã€vimå‘½ä»¤æ±‡æ€».md\":\"c226beea\",\"source-analysis_å‰ç«¯è¿ç»´_3ã€æ–‡ä»¶æƒé™.md\":\"ef61675b\",\"source-analysis_å‰ç«¯è¿ç»´_4ã€nginxå­¦ä¹ .md\":\"1d52ea19\"}")</script>
    <script type="module" async src="/portal-blog/assets/app.82ff9f7d.js"></script>
    
  </body>
</html>