import{o as n,c as s,d as a}from"./app.f4d85410.js";const t='{"title":"ä¸€ã€åˆè¯† nginx","description":"","frontmatter":{},"headers":[{"level":2,"title":"ä¸€ã€åˆè¯† nginx","slug":"ä¸€ã€åˆè¯†-nginx"},{"level":3,"title":"1.1ã€å®‰è£…","slug":"_1-1ã€å®‰è£…"},{"level":3,"title":"1.2 æ“ä½œ","slug":"_1-2-æ“ä½œ"},{"level":3,"title":"1.3ã€é…ç½®æ–‡ä»¶","slug":"_1-3ã€é…ç½®æ–‡ä»¶"}],"relativePath":"source-analysis/å‰ç«¯è¿ç»´/4ã€nginx.md","lastUpdated":1625673383119}',e={},o=a('<p>å­¦ä¹ æŒæ¡å¥½ <code>nginx</code>,</p><h2 id="ä¸€ã€åˆè¯†-nginx"><a class="header-anchor" href="#ä¸€ã€åˆè¯†-nginx" aria-hidden="true">#</a> ä¸€ã€åˆè¯† nginx</h2><h3 id="_1-1ã€å®‰è£…"><a class="header-anchor" href="#_1-1ã€å®‰è£…" aria-hidden="true">#</a> 1.1ã€å®‰è£…</h3><p>ä»¥ centos ä¸ºä¾‹ï¼Œé€šè¿‡ yum è¿›è¡Œå®‰è£…</p><div class="language-shell"><pre><code><span class="token comment"># å®‰è£…nginx</span>\nyum <span class="token function">install</span> nginx -y\n<span class="token comment"># æŸ¥çœ‹å®‰è£…çš„ç‰ˆæœ¬</span>\nnginx -v\n<span class="token comment"># æŸ¥çœ‹ç¼–è¯‘æ—¶çš„å‚æ•°</span>\nnginx -V \n</code></pre></div><h3 id="_1-2-æ“ä½œ"><a class="header-anchor" href="#_1-2-æ“ä½œ" aria-hidden="true">#</a> 1.2 æ“ä½œ</h3><p><strong>å‘½ä»¤</strong></p><div class="language-shell"><pre><code>systemctl <span class="token punctuation">[</span>option<span class="token punctuation">]</span> nginx.server\n</code></pre></div><p><strong>option</strong></p><ul><li><code>start</code>: å¯åŠ¨</li><li><code>stop</code>: åœæ­¢</li><li><code>status</code>: çŠ¶æ€</li><li><code>restart</code>: é‡å¯</li><li><code>reload</code>: é‡æ–°è¯»å–é…ç½®</li></ul><h3 id="_1-3ã€é…ç½®æ–‡ä»¶"><a class="header-anchor" href="#_1-3ã€é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 1.3ã€é…ç½®æ–‡ä»¶</h3><p>ä¸Šé¢å®‰è£…çš„ nginx ç‰ˆæœ¬ä¸º <code>nginx/1.20.1</code>ï¼Œä»¥æ­¤ä¸ºä¾‹ï¼Œnginx é…ç½®æ–‡ä»¶å¦‚ä¸‹</p><ul><li><p><code>/etc/nginx/nginx.conf</code>: ä¸»é…ç½®æ–‡ä»¶</p></li><li><p><code>/etc/nginx/conf.d/*.conf</code>: åŒ…å«<code>conf.d</code>ç›®å½•ä¸‹é¢çš„æ‰€æœ‰é…ç½®æ–‡ä»¶</p></li><li><p><code>/etc/nginx/default.d/*.conf</code>: åŒ…å«<code>default.d</code>ç›®å½•ä¸‹é¢çš„æ‰€æœ‰é…ç½®æ–‡ä»¶</p></li></ul><h4 id="_1-3-1ã€nginxé…ç½®è¯­æ³•"><a class="header-anchor" href="#_1-3-1ã€nginxé…ç½®è¯­æ³•" aria-hidden="true">#</a> 1.3.1ã€nginxé…ç½®è¯­æ³•</h4><p>ä¸»é…ç½®æ–‡ä»¶ <code>/etc/nginx/nginx.conf</code> é…ç½®å¦‚ä¸‹</p><div class="language-shell"><pre><code><span class="token comment"># å…¨å±€é…ç½® </span>\nuser nginx<span class="token punctuation">;</span> <span class="token comment"># user: è®¾ç½®nginxæœåŠ¡çš„ç³»ç»Ÿä½¿ç”¨ç”¨æˆ·</span>\nworker_processes auto<span class="token punctuation">;</span> <span class="token comment"># å·¥ä½œè¿›ç¨‹æ•°,ä¸€èˆ¬å’ŒCPUæ•°é‡ç›¸åŒ</span>\nerror_log /var/log/nginx/error.log<span class="token punctuation">;</span> <span class="token comment"># nginxçš„é”™è¯¯æ—¥å¿—</span>\npid /run/nginx.pid<span class="token punctuation">;</span> <span class="token comment"># nginxæœåŠ¡å¯åŠ¨æ—¶çš„pid</span>\n\n<span class="token comment"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span>\ninclude /usr/share/nginx/modules/*.conf<span class="token punctuation">;</span>\n\n<span class="token comment"># äº‹ä»¶é…ç½® </span>\nevents <span class="token punctuation">{</span>\n    worker_connections <span class="token number">1024</span><span class="token punctuation">;</span> <span class="token comment"># æ¯ä¸ªè¿›ç¨‹å…è®¸çš„æœ€å¤§è¿æ¥æ•° </span>\n<span class="token punctuation">}</span>\n\n<span class="token comment"># http é…ç½®</span>\nhttp <span class="token punctuation">{</span>\n\n    log_format  main  <span class="token string">&#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span>\n                      <span class="token string">&#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span>\n                      <span class="token string">&#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span><span class="token punctuation">;</span> <span class="token comment"># æ—¥å¿—è®°å½•æ ¼å¼</span>\n\n    access_log  /var/log/nginx/access.log  main<span class="token punctuation">;</span> <span class="token comment"># é»˜è®¤è®¿é—®æ—¥å¿—</span>\n\n    sendfile            on<span class="token punctuation">;</span>  <span class="token comment"># å¯åŠ¨ sendfile</span>\n    tcp_nopush          on<span class="token punctuation">;</span>  <span class="token comment"># tcp_nopush: æ‡’å‘é€</span>\n    tcp_nodelay         on<span class="token punctuation">;</span>  \n    keepalive_timeout   <span class="token number">65</span><span class="token punctuation">;</span>  <span class="token comment"># è¶…æ—¶æ—¶é—´</span>\n    types_hash_max_size <span class="token number">4096</span><span class="token punctuation">;</span> \n\n    include             /etc/nginx/mime.types<span class="token punctuation">;</span> <span class="token comment"># æ–‡ä»¶åç¼€å’Œç±»å‹ç±»å‹çš„å¯¹åº”å…³ç³»</span>\n    default_type        application/octet-stream<span class="token punctuation">;</span> <span class="token comment"># é»˜è®¤content-type</span>\n\n    include /etc/nginx/conf.d/*.conf<span class="token punctuation">;</span> <span class="token comment"># åŒ…å«çš„å­é…ç½®æ–‡ä»¶</span>\n\n    <span class="token comment"># server é…ç½®</span>\n    server <span class="token punctuation">{</span>\n        listen       <span class="token number">80</span><span class="token punctuation">;</span> <span class="token comment"># ç›‘å¬ç«¯å£</span>\n        listen       <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80<span class="token punctuation">;</span> \n        server_name  _<span class="token punctuation">;</span> <span class="token comment"># ç”¨åŸŸåæ–¹å¼è®¿é—®çš„åœ°å€</span>\n        root         /usr/share/nginx/html<span class="token punctuation">;</span> <span class="token comment"># é™æ€æ–‡ä»¶æ ¹ç›®å½•</span>\n\n        location / <span class="token punctuation">{</span>\n          root /usr/share/nginx/html<span class="token punctuation">;</span>\n          index index.html index.htm<span class="token punctuation">;</span> <span class="token comment"># é¦–é¡µçš„ç´¢å¼•æ–‡ä»¶</span>\n        <span class="token punctuation">}</span>\n\n        error_page <span class="token number">404</span> /404.html<span class="token punctuation">;</span> <span class="token comment"># æŒ‡å®šé”™è¯¯é¡µé¢ ğŸ™…â€â™‚ï¸</span>\n        location <span class="token operator">=</span> /404.html <span class="token punctuation">{</span>\n        <span class="token punctuation">}</span>\n\n        error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span> <span class="token comment"># æŠŠåå°é”™è¯¯é‡å®šå‘åˆ°é™æ€çš„50x.htmlé¡µé¢</span>\n        location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div>',16);e.render=function(a,t,e,p,c,l){return n(),s("div",null,[o])};export default e;export{t as __pageData};
